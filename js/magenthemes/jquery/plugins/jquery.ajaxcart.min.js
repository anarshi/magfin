/**
 *
 * ------------------------------------------------------------------------------
 * @category Mato
 * @package Mato Framework
 * ------------------------------------------------------------------------------
 * @copyright    Copyright (C) 2008-2015 ZooExtension.com. All Rights Reserved.
 * @license      GNU General Public License version 2 or later;
 * @author       ZooExtension.com
 * @email        magento@cleversoft.co
 * ------------------------------------------------------------------------------
 *
 */
function themeResize(){width=$mt(window).width(),width<=752?($mt("body").find(".btn-cart").addClass("btn-cart-mobile"),$mt(".product-quick-view").length>0&&$mt("body").find(".btn-cart").removeClass("btn-cart-mobile")):$mt("body").find(".btn-cart").removeClass("btn-cart-mobile")}function setAjaxData(t){if("ERROR"==t.status)showCartBox(t.message);else{if($mt(".mt-maincart").html(""),$mt(".mt-maincart")&&$mt(".mt-maincart").append(t.output),$mt(".header .links")&&$mt(".header .links").replaceWith(t.toplink),$mt.colorbox.close(),"1"==showPopupCart)showCartInfo(t);else if(!$mt("button[product-id="+t.product_id+"]:has(i)").length){$mt("button[product-id="+t.product_id+"]").append('<i class="fa fa-check"></i>');var a=$mt("#inline").find("a").attr("href");$mt("button[product-id="+t.product_id+"]").after('<a class="show-cart" href="'+a+'"><span>'+Translator.translate("Show cart")+"</span></a>")}$mt("#notification").html("")}}function showCartInfo(t){if($mt("#notification").html(""),"undefined"!=typeof t.product_info){$mt("body").append('<div><a href="#inline" class="cart-info-ex"></a></div>'),$mt(".cart-ajax-title").html("");var a='<img src="'+t.product_info.image_url+'" /><h4>'+t.product_info.title+"</h4>";$mt(".cart-ajax-title").append(a),$mt(".cart-info-ex").colorbox({inline:!0,opacity:.3,innerWidth:"460px",innerHeight:"auto",onOpen:function(){$mt("#cboxLoadingGraphic").addClass("box-loading")},onComplete:function(){$mt("#cboxLoadingGraphic").removeClass("box-loading")}}),$mt(".cart-info-ex").click()}}function showCartBox(t,a){$mt("#notification").html('<div class="success" style="display: none;"><i class="fa fa-check"></i>'+t+'<button class="close"><i class="fa fa-times-circle"></i></button></div>'),a?($mt(".success").addClass("wait-loading"),$mt(".success .fa-check").hide(),$mt(".success .close").hide()):($mt(".success").removeClass("wait-loading"),$mt(".success .fa-check").show(),$mt(".success .close").show()),$mt(".success").fadeIn("slow"),a||setTimeout(function(){$mt(".success").delay(500).fadeOut(1e3)},7e3)}function setLocation(t){var a=t.indexOf("checkout/cart")>-1,e=!0;if($mt("body").find(".btn-cart-mobile").length>0&&(e=!1),a&&e){data="&isAjax=1&qty=1",t=t.replace("checkout/cart","ajaxcart/index");try{$mt.ajax({url:t,dataType:"json",data:data,type:"post",success:function(t){setAjaxData(t)}})}catch(o){}return!1}return window.location.href=t}function deletecart(t){var a=t.indexOf("checkout/cart")>-1;if(a&&confirm("Are you sure you would like to remove this item from the shopping cart?")){data="&isAjax=1&qty=1";var t=t.replace("checkout/cart","ajaxcart/index");showCartBox(datatext.load,!0),$mt.ajax({url:t,dataType:"json",data:data,type:"post",success:function(t){setAjaxData(t,!1)}})}return!1}$mt(function(t){themeResize(),t(window).resize(function(){themeResize()}),t(".mt-maincart a").live("click",function(){var a=t(this).attr("href").indexOf("checkout/cart/delete")>-1;return a&&"deletecart"!=t(this).attr("class")&&-1==t(this).attr("class").indexOf("btn-remove2")?(deletecart(t(this).attr("href")),!1):void 0}),t(".success button.close").live("click",function(){t(this).parent().fadeOut("slow",function(){t(this).remove()})}),t(".options-cart").live("click",function(){t.colorbox({iframe:!0,href:this.href,opacity:.5,speed:300,current:"{current} / {total}",close:"close",innerWidth:"780px",innerHeight:"650px",onOpen:function(){t("#cboxLoadingGraphic").addClass("box-loading")},onComplete:function(){setTimeout(function(){t("#cboxLoadingGraphic").removeClass("box-loading")},1300)}})}),t(".show-options").live("click",function(){return 0!=t(".btn-cart-mobile").length?window.location.href=t(this).attr("data-submit"):void t("[data-id=options-cart-"+t(this).attr("data-id")+"]").trigger("click")}),t(".product-view").length>0&&0==t(".option-file").length&&0==t(".btn-cart-mobile").length&&(productAddToCartForm.submit=function(a,e){if(this.validator.validate()){var o=this.form,i=o.action;e&&(o.action=e);var c=null;e||(e=t("#product_addtocart_form").attr("action"));var n=e.indexOf("wishlist/index/cart")>-1;e=e.replace("checkout/cart","ajaxcart/index");var r=t("#product_addtocart_form").serialize();r+="&isAjax=1";try{n?this.form.submit():0==t("#qty").val()?0==t(".error_qty").length&&t("<span/>").html("The quantity not zero!").addClass("error_qty").appendTo(t(".add-to-cart")):(t(".error_qty").remove(),t("span.textrepuired").html(""),t.ajax({url:e,dataType:"json",type:"post",data:r,success:function(t){parent.setAjaxData(t,!0),"1"!=showPopupCart&&showCartBox(t.message),a&&"undefined"!=a&&(a.disabled=!1)}}))}catch(c){}if(this.form.action=i,c)throw c}return!1}.bind(productAddToCartForm))});